suite: autoscaling feedback when className is alb
templates:
  - templates/services/ingress-alb.yaml
tests:
  - it: "fail for ingress.host"
    set:
      raster.enabled: false
      stac.enabled: false
      vector.enabled: true
      vector.autoscaling.enabled: true
      vector.autoscaling.type: "cpu"
      ingress.className: "alb"
      ingress.host: "abcd.eoapi.com"
    asserts:
      - failedTemplate:
          errorMessage: When using an 'ingress.className' other than 'nginx' you cannot provision a 'host' at this time
  - it: "fail for ingress.tls.enabled"
    set:
      raster.enabled: false
      stac.enabled: false
      vector.enabled: true
      vector.autoscaling.enabled: true
      vector.autoscaling.type: "cpu"
      ingress.className: "alb"
      ingress.tls.enabled: true
    asserts:
      - failedTemplate:
          errorMessage: When using an 'ingress.className' other than 'nginx' you cannot enable 'tls' at this time